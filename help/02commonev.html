<!doctype html>
<html lang="ja">
<HEAD>
<meta charset="UTF-8">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta name="GENERATOR" content="JustSystems Homepage Builder Version 22.0.5.0 for Windows">
<TITLE>コモンイベントの設定</TITLE>
<LINK rel="stylesheet" href="style.css">

<style>
body {
  margin: 0;
  display: flex;
  height: 100vh;
  overflow: hidden;
  font-family: sans-serif;
}
#menu-frame {
  width: 185px;
  min-width: 185px;
  max-width: 185px;
  border-right: 1px solid #aaa;
  height: 100%;
}
#content {
  flex-grow: 1;
  overflow-y: auto;
  padding: 16px;
}
iframe {
  width: 100%;
  height: 100%;
  border: none;
}
</style>
</HEAD>
<BODY>
<!-- 左：メニュー -->
<div id="menu-frame">
<iframe src="00_menu.html" title="メニュー"></iframe>
</div>
<!--ここから右欄-->
<div id="content" id="scroll-target">


<P><BR>
<B><FONT size="+1">【コモンイベントの設定】</FONT></B><BR>
<BR>
　※コモンイベントとは … ゲーム中のどこからでも呼び出して使用できるイベントのことです。<BR>
<BR>
　コモンイベント設定は、メインウィンドウのこのアイコンボタン<IMG src="icon_commonev.gif" border="0">をクリックすることで開くことができます。<BR>
<BR>
<IMG src="Main_commonev.png" border="0" style="width:95%;max-width:820px;">
<BR>
<br>
<BR>
　基本的な使い方は「<a href="04eventwindow.html" target="B">イベントウィンドウ</a>」と同じなのでそちらを参照してください。ここではコモンイベントエディタ特有の機能について説明します。<BR>
　<BR>
<B>A．コモンイベント一覧</B><BR>
基本的にマップイベントウィンドウの①と同等ですが、コモンイベントでは複数コピーが出来ます。<BR>
<BR>
<BR>
<B>B．イベントコマンド表示欄</B><BR>
マップイベントウィンドウの②と同等です。<BR>
また、ここに.commonファイルをドラッグ＆ドロップすることでファイル出力の読込と同じ動作をします<BR>
<BR>
<B>１．入力の数/結果を返す</B><BR>
　「呼び出しのみ」の起動条件のコモンイベントでは、変数または文字列による「入力」を設定することができます。別イベントから呼び出される際に、許可した数だけ「入力」を受け付けられるようになります。入力された値は、変数の場合では入力1～4の値がそれぞれコモンセルフ変数0～3番に格納され、文字列の場合はコモンセルフ変数5～8に格納されて、コモンイベント開始時のコモンセルフ値として使用されます。（プログラム的にいえば「引数」の数と言い換えてもいいかもしれません）<BR>
　入力の数および結果を返す設定は、★の「<B>設定</B>」ボタンから、設定します。詳細は下の方で説明します。<BR>
<BR>
<BR>
<B>２．起動条件</B><BR>
　コモンイベントの起動条件を指定します。起動条件には以下の4種類があります。
<TABLE border="0">
<TBODY>
<TR>
<TD><IMG src="Main_commonev1.png" border="0"></TD>
<TD><B>呼び出しのみ</B> … 起動するのは別イベントから呼び出されたときのみ<BR>
<B>自動実行</B> … 条件（後述）が満たされたときに実行される。実行中は他のイベントは起動しない。<BR>
<B>並列実行</B> … 条件（後述）が満たされたときに実行される。実行中でも他のイベントが起動する。<BR>
<B>並列実行（常時）</B> … 条件に関わらず並列実行される、実行中でも他のイベントが起動する。<BR>
      <BR>
      ※並列処理イベントから「イベントの挿入」を行うと、挿入されたイベントは並列イベントとして動作します。</TD>
</TR>
</TBODY>
</TABLE>
<P>※並列実行のイベントは、条件が満たされなくなった段階で、たとえイベントの途中であっても処理が中断されてしまいます（ただし、処理高速化の副作用で、変数操作などの「絶対にウェイトが入らないコマンド」は続けて処理されてしまいます）。<BR>
　また、イベントの途中でマップ移動した時も処理が中断され、条件を満たす場合は初めから再開されます。</P>
<P><BR>
<B>３．条件</B><BR>
　起動条件が「自動実行」「並列実行」の場合のみ、この欄に値を入力することができます。この欄で指定した条件が満たされたときだけイベントが実行されます。<BR>
<BR>
<BR>
<B>４．メモ</B><BR>
　コモンイベントを呼び出す際、このメモが表示されます。入力や処理のメモなどに使用してください。<BR>
<BR>
<BR>
<B>５．ファイル出力</B><BR>
　コモンイベントを.common/.txt形式のファイルとして出力したり、読み込んだりすることができます。<BR>
<BR>
　・<B>単体保存 </B>… 選択中のコモンイベントだけを保存します。<BR>
　・<B>複数保存</B> … 複数のコモンイベントをまとめて1つのファイルとして保存します。<br>
　・<B>複数保存(TXT)</B> … 複数のコモンイベントをテキストファイル(.txt)としてまとめて1つのファイルとして保存します。<BR>
　・<B>読込　</B>… .common/.txt形式のファイルからコモンイベントを読み込みます、そこにあったイベントは上書きされてしまうので注意してください。<BR>
　　※<B><Font color="red">Shiftを押しながら「単体保存」ボタンを押すと、表示されている通りの「コマンド文」をファイル出力できます</font></B>。講座作成や質問の際などにお役立てください。<BR>
<BR>
<BR>
<B>６．チェックポイント機能</B><BR>
　イベント内にチェックポイントを設置する機能です。「<B>◆チェックP追加</B>」でチェックポイントを追加しておて「<B>次チェックPへジャンプ</B>」ボタンを押すと、次チェックポイントまですぐ飛ぶことができます。作成中の処理に入れておいたり、大規模イベントの処理ごとに入れて見やすくしたりするのに使えるでしょう。<BR>
　また、特モードにチェックを入れると、普段使ってるのとは別のチェックポイントを設置・検索することができます。開発中の最新の場所にだけ入れるなどしてください。<BR>
<BR>
<BR>
<B>７．「一つ元に戻す」ボタン</B><BR>
　C、V、X、Delキーによる操作を、一つ元に戻します。これ以外の操作（イベントコマンドの挿入など）に関しては今のところ戻すことはできません。うっかり間違えて左記キーを押して大変なことになった場合に使ってください。最大１０回分まで巻き戻し可能です。<BR>
<BR>
<BR>
<B>８．テストプレイ</B><BR>
　テストプレイを開始するもので、メインウィンドウの<IMG src="icon_testplay.gif" border="0">「テストプレイ」ボタンと機能は同じです。<BR>
<BR>
<BR>
<B>９．データ最大数の変更</B><BR>
　コモンイベントの数を変更します。最大は10000です。<BR>
<br>
<br>
<BR>
<BR>
<HR>
<P><BR>
<B>★.「設定」による特殊入力設定</B><BR>
　画面上部の「設定」ボタンを押すと、以下のウィンドウが表示されます。ここで、入力の数とその内容、および、「結果」を指定します。<BR>
<BR>
　<IMG src="Main_commonev2.png" border="0"><BR>


<P><B>・入力する値の意味</B><BR>
　ここに入力の名前を指定しておくと、「<B><A href="04ev_common.html">コモンイベント</A></B>」のコモンイベントの呼び出し時に入力値の名前が表示され、より分かりやすくなります。<BR>
<BR>
<B>・特殊指定</B><BR>
　数値入力の特殊指定方法を設定します。以下の三種類から選ぶことができます。<BR>
<BR>
　- <B>特殊な設定方法を使用しない</B><BR>
　　デフォルト状態ではこれが指定されています。直接数字を入力する方式です。<BR>
　- <B>データベース参照</B><BR>
　　指定したデータベースのIDを見ながら数値を選択できるようになります。<BR>
　- <B>選択肢を手動作成</B><BR>
　　選択肢をあなたの手で作成します。<BR>
<BR>
<B>・結果を返す？</B><BR>
　「結果を返す」にすると、コモン終了時、呼び出し元に、このコモンイベントの指定セルフ変数の値を返します。<BR>
</P>
<HR>
<P><BR>
<B>★2.コマンドの検索</B><BR>
　「検索」ボタンを押すと、以下のウィンドウが表示されます。<BR>
　コモンイベント内から、検索したい文字列・数値を含む次のコマンドを検索することができます。<BR>
<BR>


<table border="1">
  <TBODY>
    <TR>
      <TD><IMG src="Main_commonev_search.png"></TD>
      <TD><B>【検索語】　</B><BR>
      　検索したい文字列を代入してください。<BR>
      　「【数値・変数】のみ検索」時には数値入力ボックスが表示されます。<BR>
      　Shiftを押しながら検索ボタンを押す（またはShift＋Enterを押す）と、<BR>
      　逆方向へ検索します。<br>
      <br>
      <b>【置換】</b><br>
      　文字列や数値を置換する場合にチェックをオンにし、<br>
      　置換後の文字列を代入してください。<BR>
      <B><BR>
      【検索する対象】</B><BR>
      <BR>
      　・<B>【コマンド文】から検索</B><BR>
      　　コマンドリストに表示されているコマンド文を対象に検索します。<BR>
      <BR>
      　・<B>コマンドに設定した【数値・変数】のみ検索</B><BR>
      　　コマンドに設定された数値・変数を対象に検索します。<BR>
      　　変数を検索したい場合は、<A href="06valueget.html">変数呼び出し値</A>を入力してください。<BR>
      <BR>
      　・<B>コマンドに設定した【文字列】のみ検索</B><BR>
      　　コマンドに設定された文字列を対象に検索します。<BR>
      　　文字列ピクチャに設定した文章などは、コマンド文では<BR>
      　　切れてしまいますが、この検索方法なら内部の<BR>
      　　文字列全文を正しく検索することができます。<BR>
      <BR>
      　・<B>【コモンイベント名】のみ検索</B><BR>
      　　コモンイベントの名前だけを対象に検索します。<BR>
      <BR>
      <B>【検索する範囲】</B><BR>
      ・<B>現在のイベント内のみ</B> … 今開いているイベント内だけ検索します。<BR>
      ・<B>全てのイベント</B> … 見つからない場合、次々にイベントをまたいで検索します。</TD>
    </TR>
  </TBODY>
</table>
<HR>
<P><BR>
<B>★3.セルフ変数使用状況</B><BR>
　「セルフ変数使用状況」ボタンを押すと、以下のウィンドウが表示されます。<BR>
　現在のコモンイベント中のコモンセルフ変数が、使用中かそうでないかを一覧できます。<BR>
　また同時に、コモンセルフ変数名を設定することも出来ます。<BR>
<BR>
　ただし、チェックできるのは、<font color=#ff4444><B>1600000～1600099を直接変数呼び出し値で設定したもの及びドロップダウン リストより選択された物</B></font>のみです。<BR>
　文章中の\cself[？]やX番の変数呼出などは検知できず、またデータを呼ばない設定でも検知します。<BR>
<BR>
　　<IMG src="Main_commonev_self.png" width="450" height="270"><BR>
<BR>
　また、<B>全てコピー＆貼り付け</B>機能により他のコモンから一気にコモンセルフ名をつけることが出来ます。<BR>
　<B>空欄だけ貼り付け</B>を押した場合、現在コモンセルフ名が空欄の場所にだけコピー元の名前を貼り付けます。<BR>
　<B>未使用分だけリセット</B>を押すと、使用されてないコモンセルフの名前を空欄にします。<BR>
<BR>
<BR>
<BR>
<BR>

<HR>
<P><BR>
<B>【隠しコマンド】</B><BR>
　コモンイベントの一覧を選択中、以下の入力で新規コモンイベントの挿入・抜き出しが可能です。<BR>
　　・<B>CTRL+Shift+F6</B>　：　新規のコモンイベントを挿入する。<BR>
　　・<B>CTRL+Shift+F7</B>　：　選択中のコモンイベントを抜き取る。<BR>
　ただし、この機能を使うと、以降のコモンイベント番号が全てずれてしまいます。<BR>
　使用することで、ゲーム全体の整合が取れなくなる可能性が極めて高い機能なので、使用にはくれぐれも注意して下さい。
<P>　もう一点、熟練者向けの隠しショートカットがあります。<BR>　・<B>CTRL+R</B>　：　1つ前に選択していたコモンイベントへ戻る。連続で押すと行ったり来たりする。<BR>
　　　　　　　　　　→　他の部分からコピーしてくる場合などに、このショートカットが便利です。<BR>
</P>
</div>
</BODY>
</HTML>