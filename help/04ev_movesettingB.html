<!doctype html>
<html lang="ja">
<HEAD>
<meta charset="UTF-8">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta name="GENERATOR" content="JustSystems Homepage Builder Version 22.0.5.0 for Windows">
<TITLE>動作指定</TITLE><LINK rel="stylesheet" href="style.css">
</HEAD>
<BODY>
<P><BR>
　キャラクターの動作指定ウィンドウについて説明します。このウィンドウは、以下の2つの場合で表示されます。<BR>
<B>　・イベントエディタにて、移動ルートを「カスタム」にして「ルート」ボタンを押したとき<BR>
　・イベントコマンド「その他1」にて、「■動作指定」ボタンを押したとき</B><BR>
<BR>
<BR>
<B><FONT size="+1">【動作指定ウィンドウのコマンド操作】</FONT></B><BR>
<BR>
　　<b>Cキー</b>：コピー<br>
　　<b>Xキー</b>：切り取り<br>
　　<b>Vキー</b>：貼り付け<br>
　　<b>Delキー</b>：削除<br>
　　<b>コマンドをダブルクリック</b>：コマンド内容の数値を読み込みます。「<b>座標指定</b>」のコマンドであればマップ表示もその位置に表示します。<BR>
<BR>
<BR>
<B><FONT size="+1">【各部の説明】</FONT></B><BR>
<BR>
<B>１．動作指定する対象</B><BR>
　どのイベント（またはプレイヤーキャラクター）を動作させるかを選択します。また、セルフ変数や通常変数で動作させるキャラの指定を行うことも可能です、変数はこのプルダウンリスト内の下の方にあります。<BR>
　セルフ変数や通常変数で動作させるキャラを指定する際、変数の値とイベントの対応付けは以下のようになっています。
<TABLE border="1" cellpadding="3" cellspacing="1">
<TBODY>
<TR>
<TD>
<B>　0以上の場合</B> ＝ その値のIDを持つイベント<BR>
　　　　　（例：2が入ってたらID2番のイベントに動作させる）<BR>
　<B>-1</B>＝このイベント<BR>
　<B>-2</B>＝主人公(隊列先頭)<BR>
　<B>-3</B>＝仲間1(2人目)<BR>
　<B>-4</B>＝仲間2(3人目)<BR>
　<B>-5</B>＝仲間3(4人目)<BR>
　<B>-6</B>＝仲間4(5人目)<BR>
　<B>-7</B>＝仲間5(6人目)
</TD>
</TR>
</TBODY>
</TABLE>
<BR>
<P><B>２．動作内容</B><BR>
　動作内容を表示する欄です。<BR>
<BR>
<BR>
<B>３．動作を繰り返す　/　移動できない場合は飛ばす</B><BR>
　「<B>動作を繰り返す</B>」をオンにしていると、指定した動作を何度も繰り返します。<BR>
　「<B>移動できない場合は飛ばす</B>」をオンにしていると、移動できない場合は動作を飛ばします。このチェックを外している場合、移動できない状況になると次の動作に移れず、ゲームが停まったままになる場合がありますのでご注意下さい。<BR>
<BR>
<br>
<BR>
<B>４．移動コマンド</B><BR>
　マップを移動させるときに使うコマンド群です。8方向のキーは各方向へ1歩移動するキーで、それ以外は書いてある通りです。<br>
　特殊なものだけ以下に補足しておきます。<BR>
<BR>
　・<B>ジャンプ</B> … キャラクターを右の欄で指定した距離だけジャンプさせます、距離を右0、下0にするとその場でジャンプします。左や上に移動させたい場合は右または下の欄にマイナスの値を入力してください。<br>
<BR>
　・<B>EvID[　]のイベントに接近</B> … 指定したIDのイベントに一歩近付きます。8方向移動可能な場合は斜めにも移動しますが、4方向移動しか許可されていない場合は4方向のみで追跡します。なお、この欄には変数を指定することも可能です（例：2000000と入力すると通常変数0番の値のIDのイベントに接近する）。<br>
<br>
　<b>【座標指定】</b>　※1マス単位で座標指定して動作を実行できます（精密座標では指定できません）<BR>
　・<B>X[　] Y[　]の位置に一歩移動</B> … 指定した位置に1歩近付きます。その他は「EvID[　]のイベントに接近」と同様です。<br>
<BR>
　<b>・X[　] Y[　]の位置にジャンプ</b> … 指定した位置までジャンプします。<br>
<br>
　<b>・自動移動・短[単純(Ev)無視]</b>… 指定した位置まで自動で移動します。最初に「マップ通行設定のみ(Evはないものとする)」で移動ルートを計算し、以後はルート通り進みます。 <br>
　　　　進路上に他のイベントや主人公がいた場合は止まります。20マス程度の短距離向け。処理の都合上、1×1マスの隙間がない場合は通行できないものとして扱われます。<br>
　　<span style="font-size : 80%;">→　プレイヤーやイベントが道を塞いで止まってしまっても問題ない状況向け。</span><br>
<br>　<b>・自動移動・短[スマート(小迂回)]</b>… 最初に大局的な進行ルートを「マップ通行設定」のみで取得し、基本はその道に沿って移動しますが、もし他イベントや主人公が経路を塞いでいた場合は少し迂回して移動します。20マス程度の短距離向け。<br>
<span style="font-size : 80%;">　　→　それなりに賢く移動させたい場合はこれがおすすめです。負荷もほどほど。ただし「イベントでゴールまでの通路が塞がれている」場合は途中で止まってしまいます。</span><br>
<br>　<b>・自動移動[大負荷]</b>… 大局的な進行ルートも「マップとイベント両方込み」の当たり判定で取得し、通行できない場合や低頻度で大局的なルートを再取得し直します。かなり遠くまでの経路も発見できますが負荷が高いです。<br>
<span style="font-size : 80%;">　 →　イベントが完全に道を塞いでいて、非常に遠回りせねばならない状況でも経路探索に成功する可能性があります。</span><br>
<span style="font-size : 80%;">　　　ただし「ランダム移動するキャラがたまたま経路を塞いでいる」場合もそれに敏感に反応して大局的な進行ルートを変えてしまったり、「道がない」と判断して一時的に止まってしまったりする場合があります。</span><br>
<br>
　<b>・自動移動・一歩のみ </b>… このチェックをオンにしていると、自動移動を1歩行った時点で処理を終了します。「<b>移動する主人公を追跡する</b>」など、自動移動のゴール位置が逐次移動する場合はこのチェックをオンにして、毎歩、自動移動をし直すのがおすすめです。なお毎歩ルート計算をしなおすので処理負荷は大きくなります。<br>
<br>
<span style="font-size : 80%;">　<b>【自動移動を開始する条件】</b></span><br>
<span style="font-size : 80%;">　●移動開始できるケース：開始地点～目標地点までの<b>1×1通行可の連続経路</b>が必要です。開始地点と目標地点の「<b>通行判定が1x1すべて○</b>」なら、目標地点上に「<b>通行不能なイベント</b>」がある場合でも移動開始します。もし目標地点にイベントがいる場合は、<b>最後のイベントの手前で止まります</b>。<br>
　●移動開始しないケース1(経路がない)：開始地点または目標地点の「<b>マップ自体が通行判定が1/4マスでも×を含む</b>」、または目標地点まで「<b>マップ的に到達不能（道がない）</b>」な場合は移動開始できません。<span style="color : #cc0000;
"><b>たとえば開始地点や目標地点が「半マス通行不能」だと移動を開始しません</b></span>。<br>
　●移動開始しないケース2(遠すぎる)：<b>「回り道しなければならない量」が一定量を超える</b>と移動が行われない場合があります。</span><br>
<span style="font-size : 80%;">　　→　ルート検索範囲は「移動先が遠い」ほど広くなるため、「座標上は2マス先にあるが、100歩以上回り道しないとたどり着けない場所」などには弱く、移動が行われないことが多いです。</span><br>
<br>
<br>
　※なお、「<b>移動できない場合は飛ばす</b>」がオンの場合は、自動移動で「移動開始できなかった場合」も「1歩でも完全に足を止められた場合」でも次のコマンドに移りますのでご注意ください。<br>
<br>
<br>
<br>
<BR>
<B>５．方向転換コマンド</B><BR>
　イベントを方向転換したいときに使うコマンド群です。補足説明が必要と思われるものだけ以下に記載します。<BR>
<BR>
　・<B>右[左]に回転（45/90）</B> … 右（または左）に1単位回転します。たとえば、8方向グラフィックの場合なら右に45度だけ回転しますが、4方向グラフィックの場合は右に90度回転します。<BR>
　・<B>左右ランダム回転</B> … これも上と同様、右か左に1単位回転します。<BR>
<br>
<BR>
<BR>
<B>６．グラフィック変更/不透明度設定/高さ変更/効果音再生/ウェイト</B><BR>
　上の数値入力欄に入れた値に応じた、各々の処理を行います。<br>
　この数値入力欄には変数も指定可能です（例：2000000と入れると通常変数0番の値で処理される）。<BR>
　・グラフィック変更：あらかじめ、システムデータベースタイプ8に変更するキャラチップのファイルを設定しておかなければなりません。<br>
　・不透明度設定：キャラの不透明度を変更します。<br>
　・高さ変更：キャラの高さを「ピクセル単位」で変更します。高さ1以上にすると影の位置はそのままにキャラだけが浮きます。また、高さ1以上になっているキャラに対しては「下半身が半透明」チップが無効になります。<br>
　・効果音再生：システムデータベースのタイプ3にあらかじめ効果音の内容を設定しておかなければなりません。<br>
　・ウェイト：動作指定の次のコマンドまでウェイトされます。<br>
<br>
<BR>
<B>７．変数の設定</B><BR>
　動作指定中に変数の値を変化させたいときに使います。たとえば、移動が終わったら変数を変化させて自動イベントを起動するなどといったことが可能です。<BR>
<BR>
<BR>
<B>８．速度・頻度の設定</B><BR>
　移動速度・移動頻度・アニメ頻度をそれぞれ設定できます。この各々の意味は「<A href="04eventwindow.html" target="_top">イベントウィンドウ</A>」を参照して下さい。<BR>
<BR>
<BR>
<B>９．その他の設定</B><BR>
　イベントのオプションを切り替えたり、半歩移動、全歩移動を切り替えたり、イベントのアニメパターンを切り替えたりするコマンド群です。<br>
　ON/OFF切り替えのオプションはマップイベント設定時のオプションに準じます、「<a href="04eventwindow.html" target="_top">イベントウィンドウ</a>」を参照して下さい。<br>
<br>
<br>
<br>
<b>10． マップ表示ウィンドウを開く</b><br>
　マップイベントウィンドウから動作指定したとき、マップを見ながら「座標指定」の座標を設定できます。ダブルクリックすると「座標指定」に座標がセットされます。<br>
　<img src="Ev_routeset_minimap.png" width="494" height="478" border="0"><br>
<br>
</P>
<hr>
<p><br>
<b><span style="font-size : 120%;">【TIPS　「主人公」や「仲間」の半歩/全歩切り替え】</span></b><br>
<br>
　デフォルト状態で（「パーティ画像」コマンドの「シンクロ開始」を行わない状態で）動作指定で主人公や仲間の「<b>半歩/全歩移動に設定</b>」を切り替えると、隊列が乱れ、変な動きになってしまいます。<br>
　これは、各キャラの隊列移動が「X番目の仲間の動きは、主人公のY回前の移動方向を再現する」という処理が行われているため、仲間の側の「半歩/全歩」状態が切り替わると正確に隊列をトレースしなくなってしまうためです。<br>
　この挙動自体は仕様なので、主人公や仲間の半歩/全歩状態を切り替えるのはなるべく避けるようにしてください。<br>
　</p>
<hr>
<p><b><span style="font-size : 120%;"><br>
【TIPS　「並列実行」イベント内で「主人公」を動作指定させると、「プレイヤーからの接触」「イベントと接触」イベントを起動させることができる（※注意アリ）】<br>
</span></b><br>
　ちょっとした裏技ですが、「<b>並列実行</b>」イベントで「<b>主人公</b>」を「<b>動作指定</b>」で移動させると、「<b>プレイヤーからの接触</b>」起動のイベントや「<b>イベントと接触</b>」起動のイベントを起動させることができます。<br>
　でないとマウスクリックなどで自動移動などをさせたときに、これらのイベントが起動できないためです。<br>
<br>
<br>
<b>【注意！　並列の動作指定で「プレイヤーからの接触」イベントに触れた場合だけ1フレームウェイトがかかります】</b><br>
　ただし、「<b><span style="color : #cc0000;">並列実行</span></b>」で主人公を移動させて「<b><span style="color : #cc0000;">プレイヤーからの接触</span></b>」イベントが起動された瞬間だけ、<b><span style="color : #cc0000;
	font-size : 120%;
">そのとき実行中の動作指定が1フレームだけ停止</span></b>します。（Ver3.588時点）。<br>
　様々なイベント起動タイミングの整合性を取るためにそのような仕様になっています。<br>
　<b><span style="color : #cc0000;">逃走シーンなどで移動速度がかすかに低下します</span></b>ので、「あまりにもギリギリに時間調整されている」「マウスクリック自動移動が可能なゲーム」で「<b>[プレイヤーからの接触]イベントが大量に配置されている</b>」場合などはご注意ください。<br>
<br>
　また、以下の状況ではこのウェイトは起きません。<br>
　※通常移動時の、「<b><span style="color : #cc0000;">方向キーによる移動</span></b>」で「<b>プレイヤーからの接触</b>」イベントを起動させた場合は1フレームウェイトは起きません。<br>
　※「<b><span style="color : #cc0000;">イベントと接触</span></b>」イベントに触れた場合は、この1フレームウェイト現象は起きません。起きるのは「<b>並列実行の動作指定</b>」を使って主人公が「<b>プレイヤーからの接触</b>」イベントに触れた場合のみです。そのため、<b><span style="color : #cc0000;">逃走シーンなどにおいて「プレイヤーからの接触」イベントのかわりに、接触した時点で「一時消去」される「イベントと接触」イベントを配置すれば移動時の速度低下は起きません</span></b>。<br>
<br>
<br>
　「自動実行」イベントなどで主人公を動作させた場合は、「イベント実行中」はこれらの接触イベントに触れても起動させることはできません。<br>
　接触イベントの起動が可能なのは、あくまで<b><span style="color : #cc0000;">「並列実行」イベント内での「動作指定」</span></b>のみです。<br>
　</p>
<hr>
<BR>

</BODY>
</HTML>